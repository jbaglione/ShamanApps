<div class="padding-container">
    <div class="padding-container">
        <mat-form-field class="ml-5 mr-5 short-form-field-50-50">
            <input matInput [matDatepicker]="picker1" placeholder="Fecha Desde" [formControl]="desde" name="dpDesde">
            <mat-datepicker-toggle matSuffix [for]="picker1"></mat-datepicker-toggle>
            <mat-datepicker #picker1></mat-datepicker>
        </mat-form-field>
        <mat-form-field class="ml-5 mr-5 short-form-field-50-50">
            <input matInput [matDatepicker]="picker2" placeholder="Fecha Hasta" [formControl]="hasta" name="dpHasta">
            <mat-datepicker-toggle matSuffix [for]="picker2"></mat-datepicker-toggle>
            <mat-datepicker #picker2></mat-datepicker>
        </mat-form-field>
        <mat-form-field class="ml-5 mr-5 long-form-field-50-100">
            <input matInput (keyup)="applyFilter($event.target.value)" placeholder="Filtrar..." type="text" [formControl]="descripcionInput" name="Descripcion">
            <button matPrefix mat-icon-button><mat-icon>search</mat-icon></button>
        </mat-form-field>
        <div class="boxMobile">
            <button mat-raised-button type="submit" (click)="getPacientesCovid()" [disabled]="isLoading" class="ml-5 mr-5 boxMobileChild">Buscar</button>
            <button mat-raised-button matTooltip='Exportar a Excel' (click)="exportToExcel()" class="ml-5 mr-5 boxMobileChild primary-inverted-button" [disabled]="isLoading">Exportar</button>
            <!-- <button mat-icon-button matTooltip='Exportar a Excel' (click)="exportToExcel()" style="margin-right: 10px; float: right; line-height: 30px !important;" [disabled]="isLoading">
              <mat-icon svgIcon="excel_icon" class="excel-icon icon-mat-tool"></mat-icon>
              </button>
                <button mat-button (click)="exportToExcel()" matTooltip="Generear Receta en Pdf." [disabled]="isLoading" class="button-with-icon-aligns button-with-icon mat-elevation-z boxMobileChild ml-5 mr-5">
                  <span>Descargar</span>
                  <span class="span-with-icon-aligns-right" aria-hidden="true" >
                  <mat-icon>save_alt</mat-icon>
                </span>

              </button>
                <button mat-button (click)="exportToExcel()" matTooltip="Generear Receta en Pdf." [disabled]="isLoading" class="button-with-icon-aligns button-with-icon mat-elevation-z boxMobileChild ml-5 mr-5">
                  <span>Descargar</span>
                  <span class="span-with-icon-aligns" aria-hidden="true" >
                  <mat-icon svgIcon="excel_icon"  class="excel-icon icon-mat-tool"></mat-icon>
                </span>

              </button> -->
        </div>

        <div class="mat-elevation-z8 table-custom-margin">
            <div class="auto-container">
                <table mat-table *ngIf="!isLoading" [dataSource]="mtPacientesCovid" matSort #table>
                    <ng-container matColumnDef="fecIncidente" sticky>
                        <th mat-header-cell *matHeaderCellDef mat-sort-header>Fecha</th>
                        <td mat-cell *matCellDef="let element">{{element.fecIncidente | date: 'dd/MM/yyyy'}}</td>
                    </ng-container>
                    <ng-container matColumnDef="nroIncidente" sticky>
                        <th mat-header-cell *matHeaderCellDef mat-sort-header>Incidente</th>
                        <td mat-cell *matCellDef="let element">{{element.nroIncidente}}</td>
                    </ng-container>
                    <ng-container matColumnDef="clienteId">
                        <th mat-header-cell *matHeaderCellDef mat-sort-header>
                            <div style="margin-left: 16px;"> Cod.Cliente</div>
                        </th>
                        <td mat-cell *matCellDef="let element">
                            <div style="margin-left: 16px;">{{element.clienteId}}</div>
                        </td>
                    </ng-container>
                    <ng-container matColumnDef="nroAfiliado">
                        <th mat-header-cell *matHeaderCellDef mat-sort-header>Nro.Afiliado</th>
                        <td mat-cell *matCellDef="let element">{{element.nroAfiliado}}</td>
                    </ng-container>
                    <ng-container matColumnDef="paciente">
                        <th mat-header-cell *matHeaderCellDef mat-sort-header>Paciente</th>
                        <td mat-cell *matCellDef="let element">{{element.paciente}}</td>
                    </ng-container>
                    <!-- <ng-container matColumnDef="fecNacimiento">
                        <th mat-header-cell *matHeaderCellDef mat-sort-header>Fecha Nacimiento</th>
                        <td mat-cell *matCellDef="let element">{{element.fecNacimiento | date: 'dd/MM/yyyy'}}</td>
                    </ng-container> -->
                    <ng-container matColumnDef="edad">
                        <th mat-header-cell *matHeaderCellDef mat-sort-header>Edad</th>
                        <td mat-cell *matCellDef="let element">
                            {{element.edad}}
                        </td>
                    </ng-container>
                    <ng-container matColumnDef="nroDocumento">
                        <th mat-header-cell *matHeaderCellDef mat-sort-header>Nº Documento</th>
                        <td mat-cell *matCellDef="let element">{{element.nroDocumento}}</td>
                    </ng-container>
                    <ng-container matColumnDef="domicilio">
                        <th mat-header-cell *matHeaderCellDef mat-sort-header>Domicilio</th>
                        <td mat-cell *matCellDef="let element">
                            {{element.domicilio}}
                        </td>
                    </ng-container>
                    <ng-container matColumnDef="localidad">
                        <th mat-header-cell *matHeaderCellDef mat-sort-header>Localidad</th>
                        <td mat-cell *matCellDef="let element">
                            {{element.localidad}}
                        </td>
                    </ng-container>
                    <ng-container matColumnDef="telefono">
                        <th mat-header-cell *matHeaderCellDef mat-sort-header>Teléfono</th>
                        <td mat-cell *matCellDef="let element">
                            {{element.telefono}}
                        </td>
                    </ng-container>
                    <ng-container matColumnDef="entreCalle1">
                        <th mat-header-cell *matHeaderCellDef mat-sort-header>Entre Calle1</th>
                        <td mat-cell *matCellDef="let element">
                            {{element.entreCalle1}}
                        </td>
                    </ng-container>
                    <ng-container matColumnDef="entreCalle2">
                        <th mat-header-cell *matHeaderCellDef mat-sort-header>Entre Calle2</th>
                        <td mat-cell *matCellDef="let element">
                            {{element.entreCalle2}}
                        </td>
                    </ng-container>
                    <ng-container matColumnDef="sintoma">
                        <th mat-header-cell *matHeaderCellDef mat-sort-header>Sintoma</th>
                        <td mat-cell *matCellDef="let element">
                            {{element.sintoma}}
                        </td>
                    </ng-container>
                    <ng-container matColumnDef="estado">
                        <th mat-header-cell *matHeaderCellDef mat-sort-header>Estado</th>
                        <td mat-cell *matCellDef="let element" [class.remark]="element.estado?.includes('FINALIZADO')">
                            {{element.estado}}
                        </td>
                    </ng-container>
                    <ng-container matColumnDef="doctor">
                        <th mat-header-cell *matHeaderCellDef mat-sort-header>Doctor</th>
                        <td mat-cell *matCellDef="let element">
                            {{element.doctor}}
                        </td>
                    </ng-container>
                    <ng-container matColumnDef="observaciones">
                        <th mat-header-cell *matHeaderCellDef mat-sort-header>Observaciones</th>
                        <td mat-cell *matCellDef="let element">
                            {{element.observaciones}}
                        </td>
                    </ng-container>

                    <tr mat-header-row *matHeaderRowDef="dcPacientesCovid"></tr>
                    <tr mat-row *matRowDef="let row; columns: dcPacientesCovid; "></tr>
                </table>
            </div>
            <mat-paginator *ngIf="!isLoading" [pageSizeOptions]="[7, 10, 25, 100]" [hidden]="mtPacientesCovid.data.length == 0 || isLoading" class="mat-paginator-sticky"></mat-paginator>

            <div *ngIf="isLoading" style="display: flex; justify-content: center; align-items: center; height: 200px; background-color:white">
                <mat-progress-spinner color="primary" mode="indeterminate" [diameter]="50">
                </mat-progress-spinner>
            </div>

            <div style="text-align: center; padding-top: 40px; padding-bottom: 40px;" *ngIf="!isLoading && mtPacientesCovid.data.length === 0">
                NO SE ENCONTRARON RESULTADOS PARA LA BUSQUEDA
            </div>
        </div>
    </div>
</div>
