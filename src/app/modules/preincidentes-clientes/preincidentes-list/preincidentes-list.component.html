<!-- <div [hidden]="modoGenerico"> -->

<div class="padding-container">
    <div style="float: right; position:relative; color: rgba(0, 0, 0, 0.54);">{{clienteInfo != null? clienteInfo.razonSocial:''}}</div>
    <button mat-raised-button class="mb-10" (click)="verPreIncidentes('nuevo')">Solicitar Nuevo Servicio</button>
    <!-- </div> -->
    <div>
        <mat-form-field class="ml-5 mr-5">
            <input matInput (keyup)="applyFilter($event.target.value)" placeholder="Filtrar..." type="text" [formControl]="descripcionInput" name="Descripcion">
            <button matPrefix mat-icon-button><mat-icon>search</mat-icon></button>
        </mat-form-field>

        <mat-form-field class="ml-5 mr-5 short-form-field">
            <input matInput [matDatepicker]="picker1" placeholder="Fecha" [formControl]="desde" name="dpDesde">
            <mat-datepicker-toggle matSuffix [for]="picker1"></mat-datepicker-toggle>
            <mat-datepicker #picker1></mat-datepicker>
        </mat-form-field>
        <mat-form-field class="ml-5 mr-5 short-form-field">
            <input matInput [matDatepicker]="picker2" placeholder="Fecha Hasta" [formControl]="hasta" name="dpHasta">
            <mat-datepicker-toggle matSuffix [for]="picker2"></mat-datepicker-toggle>
            <mat-datepicker #picker2></mat-datepicker>
        </mat-form-field>
        &nbsp;
        <button mat-raised-button type="submit" (click)="getPreIncidentesGenerales()" [disabled]="matTableLoadingService.activo$ | async">Buscar</button>
    </div>
    <br />
    <div class="mat-elevation-z8">
        <mat-table [dataSource]="mtPreIncidentesServicios" matSort>
            <!-- <ng-container matColumnDef="id">
                <mat-header-cell *matHeaderCellDef mat-sort-header>
                    Id
                </mat-header-cell>
                <mat-cell mat-cell *matCellDef="let element" class="mat-cell-first">
                    <span class="mobile-label">Id:</span>{{element.id}}
                </mat-cell>
            </ng-container> -->
            <ng-container matColumnDef="nroServicio">
                <mat-header-cell *matHeaderCellDef mat-sort-header>
                    Nro. Servicio
                </mat-header-cell>
                <mat-cell mat-cell *matCellDef="let element" class="mat-cell-first">
                    <span class="mobile-label">Nro. Servicio:</span>{{element.nroServicio}}
                </mat-cell>
            </ng-container>
            <ng-container matColumnDef="fecha">
                <mat-header-cell *matHeaderCellDef mat-sort-header>
                    Fecha Hora
                </mat-header-cell>
                <mat-cell mat-cell *matCellDef="let element">
                    <span class="mobile-label">Fecha Hora:</span>{{element.fecha | date: 'dd/MM/yyyy' + ' ' + element.hora}}
                </mat-cell>
            </ng-container>
            <ng-container matColumnDef="grado">
                <mat-header-cell *matHeaderCellDef mat-sort-header>
                    Grado
                </mat-header-cell>
                <mat-cell mat-cell *matCellDef="let element" class="grado-cell">
                    <span class="mobile-label">Grado:</span>{{element.grado}}
                </mat-cell>
            </ng-container>
            <ng-container matColumnDef="nroAfiliado">
                <mat-header-cell *matHeaderCellDef mat-sort-header>
                    Nro. Afiliado
                </mat-header-cell>
                <mat-cell mat-cell *matCellDef="let element">
                    <span class="mobile-label">Nro. Afiliado:</span>{{element.nroAfiliado}}
                </mat-cell>
            </ng-container>
            <ng-container matColumnDef="paciente">
                <mat-header-cell *matHeaderCellDef mat-sort-header>
                    Paciente
                </mat-header-cell>
                <mat-cell mat-cell *matCellDef="let element">
                    <span class="mobile-label">Paciente:</span>{{element.apellido + ' ' + (element.nombre != null?element.nombre:'')}}
                </mat-cell>
            </ng-container>
            <ng-container matColumnDef="virDomicilio">
                <mat-header-cell *matHeaderCellDef mat-sort-header>
                    Domicilio
                </mat-header-cell>
                <mat-cell mat-cell *matCellDef="let element">
                    <span class="mobile-label">Domicilio:</span>{{element.virDomicilio}}
                </mat-cell>
            </ng-container>
            <ng-container matColumnDef="sintoma">
                <mat-header-cell *matHeaderCellDef mat-sort-header>
                    Sintoma
                </mat-header-cell>
                <mat-cell mat-cell *matCellDef="let element">
                    <span class="mobile-label">Sintoma:</span>{{element.sintoma}}
                </mat-cell>
            </ng-container>
            <!-- <ng-container matColumnDef="estado">
                <mat-header-cell *matHeaderCellDef mat-sort-header>
                    Estado
                </mat-header-cell>
                <mat-cell mat-cell *matCellDef="let element">
                    <span class="mobile-label">Estado:</span>PENDIENTE DE APROBACIÃ“N
                </mat-cell>
            </ng-container> -->
            <ng-container matColumnDef="estado">
                <mat-header-cell *matHeaderCellDef mat-sort-header>
                    Estado
                </mat-header-cell>
                <mat-cell *matCellDef="let element">
                    <span class="mobile-label">Estado:</span>
                    <button class="oldGold" mat-icon-button [color]='estadosDesc[element.estado].color' [matTooltip]='estadosDesc[element.estado].descripcion'>
                      <!-- (click)="openDialogCliente(element.clienteId, element.estado)" -->
                  <mat-icon>{{estadosDesc[element.estado].icon}}</mat-icon>
              </button>
                </mat-cell>
            </ng-container>

            <ng-container matColumnDef="observaciones">
                <mat-header-cell *matHeaderCellDef mat-sort-header>
                    Observaciones
                </mat-header-cell>
                <mat-cell mat-cell *matCellDef="let element">
                    <span class="mobile-label">Observaciones:</span>{{element.observaciones}}
                </mat-cell>
            </ng-container>



            <!-- <ng-container matColumnDef="edit">
                <mat-header-cell *matHeaderCellDef mat-sort-header>
                    Ver detalles
                </mat-header-cell>
                <mat-cell *matCellDef="let element">
                    <span class="mobile-label">Editar:</span>
                    <button (click)="verPreIncidentes(element.id, element)" mat-icon-button color='accent' matTooltip='Editar esta auditoria'>
                    <mat-icon>Ver detalles</mat-icon>
                </button>
                </mat-cell>
            </ng-container> -->
            <!-- <ng-container matColumnDef="delete">
                <mat-header-cell *matHeaderCellDef mat-sort-header>
                    Eliminar
                </mat-header-cell>
                <mat-cell *matCellDef="let element">
                    <span class="mobile-label">Eliminar:</span>
                    <button (click)="eliminarPreIncidentes(element.id)" mat-icon-button color='warn' matTooltip='Eliminar esta auditoria'>
                    <mat-icon>delete</mat-icon>
                </button>
                </mat-cell>
            </ng-container> -->
            <mat-header-row *matHeaderRowDef="dcPreIncidentesServicios"></mat-header-row>
            <!-- <mat-row *matRowDef="let row; columns: dcPreIncidentesServicios;" [hidden]="matTableLoadingService.activo$ | async"></mat-row> -->
            <mat-row *matRowDef="let row; columns: dcPreIncidentesServicios;" [hidden]="matTableLoadingService.activo$ | async" class="remove-background" (mouseover)="onMouseOver(row)" [ngClass]="{'mat-elevation-z8' : row.id == rowid}" (click)="verPreIncidentes(row.id, row)"></mat-row>
        </mat-table>
        <mat-paginator [pageSizeOptions]="[7, 10, 25, 100]" [hidden]="mtPreIncidentesServicios.data.length == 0 || (matTableLoadingService.activo$ | async)"></mat-paginator>
        <app-mat-table-loading></app-mat-table-loading>
        <app-mat-table-not-found [activo]="mtPreIncidentesServicios.data.length == 0 && !(matTableLoadingService.activo$ | async)"></app-mat-table-not-found>
    </div>
</div>